<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>GitLab 绑定 GCP 使用 Auto DevOps（可领取GCP $200.00 赠金） | Frytea</title><meta name=keywords content><meta name=description content="Auto DevOps provides pre-defined CI/CD configuration which allows you to automatically detect, build, test, deploy, and monitor your applications. Leveraging CI/CD best practices and tools, Auto DevOps aims to simplify the setup and execution of a mature & modern software development lifecycle. GitLab 的 Auto DevOps 是一个亮点，博主对于其特性还不够了解，在此不多谈"><meta name=author content="Tianlun Song"><link rel=canonical href=https://www.frytea.com/posts/essay/269/><meta name=yandex-verification content="73b1a797f62c0e98"><meta name=baidu-site-verification content="code-gnOrbP1RyC"><meta name=baidu_union_verify content="4c552c344295cb984c46ebe74962b067"><link crossorigin=anonymous href=/assets/css/stylesheet.min.b3afdc584c5be084b32082a6aa7272d8c755b9e5dfc982f0acffd5513ffcba8e.css integrity="sha256-s6/cWExb4ISzIIKmqnJy2MdVueXfyYLwrP/VUT/8uo4=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://www.frytea.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.frytea.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.frytea.com/favicon-32x32.png><link rel=apple-touch-icon href=https://www.frytea.com/apple-touch-icon.png><link rel=mask-icon href=https://www.frytea.com/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.85.0"><link rel=manifest href=/manifest.json><script src=https://staticfile-cdn.frytea.com/aplayer/1.10.1/APlayer.min.js></script><script src=https://staticfile-cdn.frytea.com/meting@2.0.1/dist/Meting.min.js></script><script type=text/javascript>function downloadJSAtOnload(){var a=document.createElement("script");a.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7296634171837358",document.body.appendChild(a)}window.addEventListener?window.addEventListener("load",downloadJSAtOnload,!1):window.attachEvent?window.attachEvent("onload",downloadJSAtOnload):window.onload=downloadJSAtOnload</script><script async defer data-website-id=3d947a98-2774-46b0-805f-fe2e4877a1d7 src=https://umami.frytea.com/umami.js></script><script async defer data-website-id=460b58e0-655d-42d7-926c-7a44aeb5730f src=https://frytea-umami.onrender.com/umami.js></script><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><link rel=stylesheet href=//staticfile-cdn.frytea.com/font-awesome@4.3.0/css/font-awesome.min.css><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script>var _hmt=_hmt||[];(function(){var a=document.createElement("script"),b;a.src="https://hm.baidu.com/hm.js?c49e2f5be5e009382be07455c33b1394",b=document.getElementsByTagName("script")[0],b.parentNode.insertBefore(a,b)})()</script><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-136094326-1','auto'),ga('send','pageview'))</script><meta property="og:title" content="GitLab 绑定 GCP 使用 Auto DevOps（可领取GCP $200.00 赠金）"><meta property="og:description" content="Auto DevOps provides pre-defined CI/CD configuration which allows you to automatically detect, build, test, deploy, and monitor your applications. Leveraging CI/CD best practices and tools, Auto DevOps aims to simplify the setup and execution of a mature & modern software development lifecycle. GitLab 的 Auto DevOps 是一个亮点，博主对于其特性还不够了解，在此不多谈"><meta property="og:type" content="article"><meta property="og:url" content="https://www.frytea.com/posts/essay/269/"><meta property="og:image" content="https://www.frytea.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-11-28T21:44:00+00:00"><meta property="article:modified_time" content="2019-11-28T21:44:00+00:00"><meta property="og:site_name" content="Frytea"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.frytea.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="GitLab 绑定 GCP 使用 Auto DevOps（可领取GCP $200.00 赠金）"><meta name=twitter:description content="Auto DevOps provides pre-defined CI/CD configuration which allows you to automatically detect, build, test, deploy, and monitor your applications. Leveraging CI/CD best practices and tools, Auto DevOps aims to simplify the setup and execution of a mature & modern software development lifecycle. GitLab 的 Auto DevOps 是一个亮点，博主对于其特性还不够了解，在此不多谈"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"随笔文集","item":"https://www.frytea.com/posts/"},{"@type":"ListItem","position":2,"name":"GitLab 绑定 GCP 使用 Auto DevOps（可领取GCP $200.00 赠金）","item":"https://www.frytea.com/posts/essay/269/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"GitLab 绑定 GCP 使用 Auto DevOps（可领取GCP $200.00 赠金）","name":"GitLab 绑定 GCP 使用 Auto DevOps（可领取GCP $200.00 赠金）","description":"Auto DevOps provides pre-defined CI/CD configuration which allows you to automatically detect, build, test, deploy, and monitor your applications. Leveraging CI/CD best practices and tools, Auto DevOps aims to simplify the setup and execution of a mature \u0026amp; modern software development lifecycle. GitLab 的 Auto DevOps 是一个亮点，博主对于其特性还不够了解，在此不多谈","keywords":[],"articleBody":"Auto DevOps provides pre-defined CI/CD configuration which allows you to automatically detect, build, test, deploy, and monitor your applications. Leveraging CI/CD best practices and tools, Auto DevOps aims to simplify the setup and execution of a mature \u0026 modern software development lifecycle.\nGitLab 的 Auto DevOps 是一个亮点，博主对于其特性还不够了解，在此不多谈。本文仅介绍如何为自建的 GitLab 绑定 Google Kubernets Engine (GKE)。\nGitLab 配置 Kubernets 节点的方式用两种，一种是绑定 GKE，一种是使用已存在的 Cluster ，但实测第二种貌似是用于 AWS ，这一点博主暂且不提。接着说本文重点 GKE。绑定 GKE需要配置 Google OAuth2 OmniAuth Provider。\n领取GCP $200.00 赠金（可用3个月） 在根据上文 《KVM 虚拟机安装 GitLab EE》 配置完毕 GieLab，在 GitLab 绑定 Kubernets 节点的界面出现这样一段描述：\n[tip type=“info” title=“Did you know?\"] Every new Google Cloud Platform (GCP) account receives $300 in credit upon sign up. In partnership with Google, GitLab is able to offer an additional $200 for both new and existing GCP accounts to get started with GitLab’s Google Kubernetes Engine . [/tip]\n大概意思是说，谷歌为每一个注册 GCP 的新账户提供 $300 的赠金。作为 GCP 的伙伴，GitLab 也可以为每一位新的并已有 GCP 账户的用户提供 $200 的赠金用于整合 GKE 和 GitLab 的整合。于是抱着试一试的心态，点击按钮填写表单，没想到没过多久，就收到了邮件：\n邮件告诉我，GCP 代表他们的合作伙伴为我提供了 $200 的信用额度，我可以使用这一额度构建自己的应用程序。兑换的信用代码需要在 30 天内兑换并在兑换后三个月内到期。\n进入兑换，成功兑换。\n如果你是进来看领取赠金的方法，我在这里简单总结一下，但是在此我想说一下：云计算服务可以做的事情很多，如果仅仅是用于 VPS 就颇有一种大炮打蚊子的场面。GCP 等大型云服务提供商提供的稳定、灵活高可用性的云计算服务更加令人兴奋。\n大致方法如下：\n 自建 GitLab （Docker，War包等方式） 使用root账户进入管理后台，进入添加 Kubernets 节点界面 检查是否有获取 GCP 赠金的入口  为 GitLab 配置 GCP 凭据实现二者对接   首先进入 GCP 云资源管理界面: cloud resource manager。\n  创建项目，可使用 GitLab  作为项目名称，项目ID可以使用系统自动生成的，也可自己指定但必须唯一\n  进入 API 控制台\n  在左上方切换到刚刚新建的项目\n  在左侧选择 OAuth 同意屏幕 并完整填写信息\n  从左侧 sidebar 进入 凭据，创建凭据，选择 OAuth 客户端 ID ，并完整填写信息\n   应用类型选择 Web 应用程序 名称可使用自动生成的或自定义 已获授权的 JavaScript 来源 可填入您的 GitLab域名 https://gitlab.example.com/  已获授权的重定向 URI  需包含下列两个地址  https://gitlab.example.com/users/auth/google_oauth2/callback https://gitlab.example.com/-/google_api/auth/callback     完成以上步骤即可得到 客户端 ID 和 客户端密钥， 信息后面还能看到，后面配置需要用到。\n  为项目授权以下 APi 权限\n   Google Kubernetes Engine API Cloud Resource Manager API Cloud Billing API  通过这个方法授权：\n 进入 Google API Console 点击 启用APi和服务 在搜索框内依次检索以上三个 API，进入点击 启用 等待数分钟完成  修改 GitLab 配置  # For Omnibus GitLab:\r$ sudo editor /etc/gitlab/gitlab.rb\r# For installations from source:\r$ cd /home/git/gitlab\r$ sudo -u git -H editor config/gitlab.yml\r找到以下内容进行修改：\n# For Omnibus GitLab:\rgitlab_rails['omniauth_providers'] = [\r{\r\"name\" = \"google_oauth2\",\r\"app_id\" = \"YOUR_APP_ID\",\r\"app_secret\" = \"YOUR_APP_SECRET\",\r\"args\" = { \"access_type\" = \"offline\", \"approval_prompt\" = '' }\r}\r]\r# For installations from source:\r- { name: 'google_oauth2', app_id: 'YOUR_APP_ID',\rapp_secret: 'YOUR_APP_SECRET',\rargs: { access_type: 'offline', approval_prompt: '' } }\r修改 YOUR_APP_ID 和 client ID为上面获取到的 GCP 密钥。\n完成  参考文献  Google OAuth2 OmniAuth Provider MyGitLab/NewClusters  ","wordCount":"1105","inLanguage":"zh","datePublished":"2019-11-28T21:44:00Z","dateModified":"2019-11-28T21:44:00Z","author":{"@type":"Person","name":"Tianlun Song"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.frytea.com/posts/essay/269/"},"publisher":{"@type":"Organization","name":"Frytea","logo":{"@type":"ImageObject","url":"https://www.frytea.com/favicon.ico"}}}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><header class=header><nav class=nav><div class=logo><a href=https://www.frytea.com/ accesskey=h title="🏡 Frytea (Alt + H)">🏡 Frytea</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://www.frytea.com/categories/ title=🗂><span>🗂</span></a></li><li><a href=https://www.frytea.com/tags/ title=🏷️><span>🏷️</span></a></li><li><a href=https://www.frytea.com/search/ title="🔍 (Alt + /)" accesskey=/><span>🔍</span></a></li><li><a href=https://www.frytea.com/posts/ title=🖋><span>🖋</span></a></li><li><a href=https://www.frytea.com/technology/ title=🛠><span>🛠</span></a></li><li><a href=https://www.frytea.com/technology/app-list/ title=⚖️><span>⚖️</span></a></li><li><a href=https://www.frytea.com/technology/projects/ title=📁><span>📁</span></a></li><li><a href=https://travellings.link title=🚇><span>🚇</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://www.frytea.com/>主页</a>&nbsp;»&nbsp;<a href=https://www.frytea.com/posts/>随笔文集</a></div><h1 class=post-title><a href=https://www.frytea.com/posts/essay/269/>GitLab 绑定 GCP 使用 Auto DevOps（可领取GCP $200.00 赠金）</a></h1><div class=post-meta>November 28, 2019&nbsp;·&nbsp;3 分钟&nbsp;·&nbsp;1105 字&nbsp;·&nbsp;Tianlun Song&nbsp;|&nbsp;<a href=https://github.com/songtianlun/songtianlun.github.io/edit/main/content/posts/essay/GitLab-%e7%bb%91%e5%ae%9a-GCP-%e4%bd%bf%e7%94%a8-Auto-DevOps%ef%bc%88%e5%8f%af%e9%a2%86%e5%8f%96GCP-$200.00-%e8%b5%a0%e9%87%91%ef%bc%89.md rel="noopener noreferrer" target=_blank>PR</a>
&nbsp;| &nbsp;<span id=busuanzi_value_page_pv><i class="fa fa-spinner fa-spin"></i></span>&nbsp;Hits</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><ul><li><a href=#%e9%a2%86%e5%8f%96gcp-20000-%e8%b5%a0%e9%87%91%e5%8f%af%e7%94%a83%e4%b8%aa%e6%9c%88 aria-label="领取GCP $200.00 赠金（可用3个月）">领取GCP $200.00 赠金（可用3个月）</a></li><li><a href=#%e4%b8%ba-gitlab-%e9%85%8d%e7%bd%ae-gcp-%e5%87%ad%e6%8d%ae%e5%ae%9e%e7%8e%b0%e4%ba%8c%e8%80%85%e5%af%b9%e6%8e%a5 aria-label="为 GitLab 配置 GCP 凭据实现二者对接">为 GitLab 配置 GCP 凭据实现二者对接</a></li><li><a href=#%e5%8f%82%e8%80%83%e6%96%87%e7%8c%ae aria-label=参考文献>参考文献</a></li></ul></div><div><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-7296634171837358 data-ad-slot=9161921641 data-ad-format=auto data-full-width-responsive=true></ins></div><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></details></div><div class=post-content><blockquote style=margin-top:8px><p style=text-align:center;text-indent:0><a href=https://www.frytea.com/posts/essay/269/>本文</a>
首发于
<a href=https://www.frytea.com/>🌱 煎茶</a>，
<a href=/disclaimer/>转载</a> 请注明
<a href=https://www.frytea.com/posts/essay/269/>来源</a>。</p></blockquote><p>Auto DevOps provides pre-defined CI/CD configuration which allows you to automatically detect, build, test,
deploy, and monitor your applications. Leveraging CI/CD best practices and tools, Auto DevOps aims
to simplify the setup and execution of a mature & modern software development lifecycle.</p><p>GitLab 的 Auto DevOps 是一个亮点，博主对于其特性还不够了解，在此不多谈。本文仅介绍如何为自建的 GitLab 绑定 Google Kubernets Engine (GKE)。</p><p>GitLab 配置 Kubernets 节点的方式用两种，一种是绑定 GKE，一种是使用已存在的 Cluster ，但实测第二种貌似是用于 AWS ，这一点博主暂且不提。接着说本文重点 GKE。绑定 GKE需要配置 Google OAuth2 OmniAuth Provider。</p><h2 id=领取gcp-20000-赠金可用3个月>领取GCP $200.00 赠金（可用3个月）<a hidden class=anchor aria-hidden=true href=#领取gcp-20000-赠金可用3个月>#</a></h2><p><img loading=lazy src=https://imagehost-cdn.frytea.com/images/2019/11/28/2F1169A2-6938-44FA-9DB3-02E6C09004D8.jpg#shadow alt></p><p>在根据上文 <a href=https://blog.frytea.com/archives/266/>《KVM 虚拟机安装 GitLab EE》</a> 配置完毕 GieLab，在 GitLab 绑定 Kubernets 节点的界面出现这样一段描述：</p><p>[tip type=&ldquo;info&rdquo; title=&ldquo;Did you know?"]
Every new Google Cloud Platform (GCP) account receives $300 in credit upon sign up. In partnership with Google, GitLab is able to offer an additional $200 for both new and existing GCP accounts to get started with GitLab&rsquo;s Google Kubernetes Engine .
[/tip]</p><p>大概意思是说，谷歌为每一个注册 GCP 的新账户提供 $300 的赠金。作为 GCP 的伙伴，GitLab 也可以为每一位新的并已有 GCP 账户的用户提供 $200 的赠金用于整合 GKE 和 GitLab 的整合。于是抱着试一试的心态，点击按钮填写表单，没想到没过多久，就收到了邮件：</p><p><img loading=lazy src=https://imagehost-cdn.frytea.com/images/2019/11/28/BAFB3179-41DE-483F-82DA-55D89B7E6800.jpg#shadow alt></p><p>邮件告诉我，GCP 代表他们的合作伙伴为我提供了 $200 的信用额度，我可以使用这一额度构建自己的应用程序。兑换的信用代码需要在 30 天内兑换并在兑换后三个月内到期。</p><p>进入兑换，成功兑换。</p><p><img loading=lazy src=https://imagehost-cdn.frytea.com/images/2019/11/28/D3A0906F-8010-4B42-9E9B-BE54C71ACD88.jpg#shadow alt></p><p>如果你是进来看领取赠金的方法，我在这里简单总结一下，但是在此我想说一下：云计算服务可以做的事情很多，如果仅仅是用于 VPS 就颇有一种大炮打蚊子的场面。GCP 等大型云服务提供商提供的稳定、灵活高可用性的云计算服务更加令人兴奋。</p><p>大致方法如下：</p><ol><li>自建 GitLab （Docker，War包等方式）</li><li>使用root账户进入管理后台，进入添加 Kubernets 节点界面</li><li>检查是否有获取 GCP 赠金的入口</li></ol><h2 id=为-gitlab-配置-gcp-凭据实现二者对接>为 GitLab 配置 GCP 凭据实现二者对接<a hidden class=anchor aria-hidden=true href=#为-gitlab-配置-gcp-凭据实现二者对接>#</a></h2><ol><li><p>首先进入 GCP 云资源管理界面: <a href=https://console.cloud.google.com/cloud-resource-manager>cloud resource manager</a>。</p></li><li><p>创建项目，可使用 <code>GitLab</code> 作为项目名称，项目ID可以使用系统自动生成的，也可自己指定但必须唯一</p></li><li><p>进入 <a href=https://console.developers.google.com/apis/dashboard>API 控制台</a></p></li><li><p>在左上方切换到刚刚新建的项目</p></li><li><p>在左侧选择 <code>OAuth 同意屏幕</code> 并完整填写信息</p></li><li><p>从左侧 sidebar 进入 <code>凭据</code>，创建凭据，选择 <code>OAuth 客户端 ID</code> ，并完整填写信息</p></li></ol><ul><li><code>应用类型</code>选择 <code>Web 应用程序</code></li><li><code>名称</code>可使用自动生成的或自定义</li><li><code>已获授权的 JavaScript 来源</code> 可填入您的 GitLab域名 <code>https://gitlab.example.com/</code></li><li><code>已获授权的重定向 URI</code> 需包含下列两个地址<ul><li><code>https://gitlab.example.com/users/auth/google_oauth2/callback</code></li><li><code>https://gitlab.example.com/-/google_api/auth/callback</code></li></ul></li></ul><ol start=7><li><p>完成以上步骤即可得到 <code>客户端 ID</code> 和 <code>客户端密钥</code>， 信息后面还能看到，后面配置需要用到。</p></li><li><p>为项目授权以下 APi 权限</p></li></ol><ul><li>Google Kubernetes Engine API</li><li>Cloud Resource Manager API</li><li>Cloud Billing API</li></ul><p>通过这个方法授权：</p><ul><li>进入 <a href=https://console.developers.google.com/apis/dashboard>Google API Console</a></li><li>点击 <code>启用APi和服务</code></li><li>在搜索框内依次检索以上三个 <code>API</code>，进入点击 <code>启用</code></li><li>等待数分钟完成</li></ul><ol start=9><li>修改 GitLab 配置</li></ol><pre><code># For Omnibus GitLab:
$ sudo editor /etc/gitlab/gitlab.rb

# For installations from source:
$ cd /home/git/gitlab
$ sudo -u git -H editor config/gitlab.yml
</code></pre><p>找到以下内容进行修改：</p><pre><code># For Omnibus GitLab:
gitlab_rails['omniauth_providers'] = [
  {
    &quot;name&quot; =&gt; &quot;google_oauth2&quot;,
    &quot;app_id&quot; =&gt; &quot;YOUR_APP_ID&quot;,
    &quot;app_secret&quot; =&gt; &quot;YOUR_APP_SECRET&quot;,
    &quot;args&quot; =&gt; { &quot;access_type&quot; =&gt; &quot;offline&quot;, &quot;approval_prompt&quot; =&gt; '' }
  }
]


# For installations from source:
- { name: 'google_oauth2', app_id: 'YOUR_APP_ID',
  app_secret: 'YOUR_APP_SECRET',
  args: { access_type: 'offline', approval_prompt: '' } }
</code></pre><p>修改 <code>YOUR_APP_ID</code> 和 <code>client ID</code>为上面获取到的 GCP 密钥。</p><ol start=10><li>完成</li></ol><p><img loading=lazy src=https://imagehost-cdn.frytea.com/images/2019/11/28/DD9E3DDF-076E-47B0-901A-3A47910869B0.jpg alt></p><h2 id=参考文献>参考文献<a hidden class=anchor aria-hidden=true href=#参考文献>#</a></h2><ul><li><a href=https://code.frytea.com/help/integration/google>Google OAuth2 OmniAuth Provider</a></li><li><a href=https://code.frytea.com/admin/clusters/new>MyGitLab/NewClusters</a></li></ul><div class=post-meta></hr>注：本作品采用<a rel=license target=view_window href=http://creativecommons.org/licenses/by-nc-sa/4.0/> 知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议 </a>进行许可。</div></div><footer class=post-footer><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share GitLab 绑定 GCP 使用 Auto DevOps（可领取GCP $200.00 赠金） on twitter" href="https://twitter.com/intent/tweet/?text=GitLab%20%e7%bb%91%e5%ae%9a%20GCP%20%e4%bd%bf%e7%94%a8%20Auto%20DevOps%ef%bc%88%e5%8f%af%e9%a2%86%e5%8f%96GCP%20%24200.00%20%e8%b5%a0%e9%87%91%ef%bc%89&url=https%3a%2f%2fwww.frytea.com%2fposts%2fessay%2f269%2f&hashtags="><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share GitLab 绑定 GCP 使用 Auto DevOps（可领取GCP $200.00 赠金） on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fwww.frytea.com%2fposts%2fessay%2f269%2f&title=GitLab%20%e7%bb%91%e5%ae%9a%20GCP%20%e4%bd%bf%e7%94%a8%20Auto%20DevOps%ef%bc%88%e5%8f%af%e9%a2%86%e5%8f%96GCP%20%24200.00%20%e8%b5%a0%e9%87%91%ef%bc%89&summary=GitLab%20%e7%bb%91%e5%ae%9a%20GCP%20%e4%bd%bf%e7%94%a8%20Auto%20DevOps%ef%bc%88%e5%8f%af%e9%a2%86%e5%8f%96GCP%20%24200.00%20%e8%b5%a0%e9%87%91%ef%bc%89&source=https%3a%2f%2fwww.frytea.com%2fposts%2fessay%2f269%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share GitLab 绑定 GCP 使用 Auto DevOps（可领取GCP $200.00 赠金） on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fwww.frytea.com%2fposts%2fessay%2f269%2f&title=GitLab%20%e7%bb%91%e5%ae%9a%20GCP%20%e4%bd%bf%e7%94%a8%20Auto%20DevOps%ef%bc%88%e5%8f%af%e9%a2%86%e5%8f%96GCP%20%24200.00%20%e8%b5%a0%e9%87%91%ef%bc%89"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share GitLab 绑定 GCP 使用 Auto DevOps（可领取GCP $200.00 赠金） on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.frytea.com%2fposts%2fessay%2f269%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share GitLab 绑定 GCP 使用 Auto DevOps（可领取GCP $200.00 赠金） on whatsapp" href="https://api.whatsapp.com/send?text=GitLab%20%e7%bb%91%e5%ae%9a%20GCP%20%e4%bd%bf%e7%94%a8%20Auto%20DevOps%ef%bc%88%e5%8f%af%e9%a2%86%e5%8f%96GCP%20%24200.00%20%e8%b5%a0%e9%87%91%ef%bc%89%20-%20https%3a%2f%2fwww.frytea.com%2fposts%2fessay%2f269%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share GitLab 绑定 GCP 使用 Auto DevOps（可领取GCP $200.00 赠金） on telegram" href="https://telegram.me/share/url?text=GitLab%20%e7%bb%91%e5%ae%9a%20GCP%20%e4%bd%bf%e7%94%a8%20Auto%20DevOps%ef%bc%88%e5%8f%af%e9%a2%86%e5%8f%96GCP%20%24200.00%20%e8%b5%a0%e9%87%91%ef%bc%89&url=https%3a%2f%2fwww.frytea.com%2fposts%2fessay%2f269%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div><nav class=paginav><a class=prev href=https://www.frytea.com/posts/essay/270/><span class=title>« 上一页</span><br><span>真的有必要活的这么累吗？</span></a>
<a class=next href=https://www.frytea.com/posts/essay/268/><span class=title>下一页 »</span><br><span>综述 DevOps</span></a></nav></footer><div id=vcomments style="background-color:var(--theme);margin-top:15px;padding:20px;border-radius:var(--radius);box-shadow:0 0 10px grey"></div><script src=//cdn1.lncld.net/static/js/3.0.4/av-min.js></script><script src=//unpkg.com/valine/dist/Valine.min.js></script><script type=text/javascript>new Valine({el:'#vcomments',appId:'mhm2sAPpC3cW2VJ15fpGGDPb-gzGzoHsz',appKey:'nx1gknfuCi4dsFHwG7cAbqUL',avatar:'retro',placeholder:'说点什么吧...',visitor:!0,recordIP:!0})</script></article></main><footer class=footer><span>Copyright &copy; 2022 • <a href=https://www.frytea.com/>Frytea</a></span>
<span>• <a href=http://beian.miit.gov.cn/ target=view_window>粤 ICP 备 19144283 号</a></span><div><span><a href=/about/>关于</a>
• <a href=/disclaimer/>免责声明</a>
• <a href=/sitemap.xml target=view_window>站点地图</a>
• <a href=https://www.foreverblog.cn/go.html target=view_window>虫洞</a>
• PV <span id=busuanzi_value_site_pv><i class="fa fa-spinner fa-spin"></i></span></span></div></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script><meta name=”apple-mobile-web-app-capable” content="”yes”"><script>'serviceWorker'in navigator&&window.addEventListener('load',()=>{navigator.serviceWorker.register('/service-worker.js')})</script></body></html>