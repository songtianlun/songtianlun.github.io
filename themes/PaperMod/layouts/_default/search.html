{{- define "main" }}

<header class="page-header">
    {{- partial "breadcrumbs.html" . }}
    <h1>{{- (printf "%s&nbsp;" .Title ) | htmlUnescape -}}
        <!-- <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="11" cy="11" r="8"></circle>
            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
        </svg> -->
    </h1>
    {{- if .Description }}
    <div class="post-description">
        {{ .Description }}
    </div>
    {{- end }}
    {{- if not (.Param "hideMeta") }}
    <div class="post-meta">
        {{- partial "translation_list.html" . -}}
    </div>
    {{- end }}
</header>


<div id="searchbox">
    <input id="searchInput" autofocus placeholder="{{ .Params.placeholder | default (printf "%s â†µ" .Title) }}" aria-label="search" type="search">
    <ul id="searchResults" aria-label="search results"></ul>
</div>
</div>

{{- if .Params.archiveTitle }}
<header class="page-header">
    <h1>
        {{ .Params.archiveTitle }}
        <sup class="archive-count">&nbsp;&nbsp;{{ len site.RegularPages }}</sup>
    </h1>
    {{- if .Params.archiveDescription }}
    <div class="post-description">
        {{ .Params.archiveDescription }}
    </div>
    {{- end }}
</header>

{{- $pages := where site.RegularPages "Type" "in" site.Params.mainSections }}

{{- if .Site.Params.ShowAllPagesInArchive }}
{{- $pages = site.RegularPages }}
{{- end }}

{{- range $pages.GroupByPublishDate "2006" }}
{{- if ne .Key "0001" }}
<!--<div class="post-content">-->
<div class="archive-year">
    <h2 class="archive-year-header">
        {{- replace .Key "0001" "" }}<sup class="archive-count">&nbsp;&nbsp;{{ len .Pages }}</sup>
    </h2>
    {{- range .Pages.GroupByDate "January" }}
    <div class="archive-month">
        <h3 class="archive-month-header">{{- .Key }}<sup class="archive-count">&nbsp;&nbsp;{{ len .Pages }}</sup></h3>
        <div class="archive-posts">
            {{- range .Pages }}
            {{- if eq .Kind "page" }}
            <div class="archive-entry">
                <h4 class="archive-entry-title">
                    {{- .Title | markdownify }}
                    {{- if .Draft }}<sup><span class="entry-isdraft">&nbsp;&nbsp;[draft]</span></sup>{{- end }}
                </h4>
                <div class="archive-meta">
                    {{- partial "post_meta.html" . -}}
                </div>
                <a class="entry-link" aria-label="post link to {{ .Title | plainify }}" href="{{ .Permalink }}"></a>
            </div>
            {{- end }}
            {{- end }}
        </div>
    </div>
    {{- end }}
</div>
<!--</div>-->
{{- end }}
{{- end }}
{{- end }}

{{- end }}{{/* end main */}}
